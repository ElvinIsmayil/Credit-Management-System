@using Credit_Management_System.Helpers

<!-- Hidden TempData fields -->
<input type="hidden" id="TempDataSuccess" value="@TempData[AlertHelper.Success]" />
<input type="hidden" id="TempDataError" value="@TempData[AlertHelper.Error]" />
<input type="hidden" id="AlertType" value="@TempData["AlertType"]" /> @* "toastr" or "swal" *@

    <!-- Load SweetAlert2 and Toastr -->
    <script src="~/lib/sweetalert2/sweetalert2.min.js"></script>
	<link href="~/lib/sweetalert2/sweetalert2.min.css" rel="stylesheet" />
    <link href="~/lib/toastr.js/toastr.min.css" />
	<script src="~/lib/toastr.js/toastr.min.js"></script>

    <script>
        toastr.options = {
            closeButton: true,
            progressBar: true,
            positionClass: "toast-top-right",
            timeOut: "4000"
        };

        document.addEventListener("DOMContentLoaded", function () {
            const success = document.getElementById("TempDataSuccess")?.value;
            const error = document.getElementById("TempDataError")?.value;
            const type = document.getElementById("AlertType")?.value?.toLowerCase();

            if (type === "toastr") {
                if (success) toastr.success(success);
                if (error) toastr.error(error);
            } else { // default to SweetAlert2
                if (success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Success!',
                        text: success,
                        confirmButtonText: 'OK',
                        customClass: {
                            confirmButton: 'btn btn-success'
                        }
                    });
                }
                if (error) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: error,
                        confirmButtonText: 'Try Again',
                        customClass: {
                            confirmButton: 'btn btn-danger'
                        }
                    });
                }
            }
        });
    </script>

